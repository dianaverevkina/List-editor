{"version":3,"file":"main.js","mappings":"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","sources":["webpack://list-editor/./src/js/App.js","webpack://list-editor/./src/js/Product.js","webpack://list-editor/./src/js/Tooltip.js","webpack://list-editor/./src/js/Popover.js","webpack://list-editor/./src/js/Crm.js","webpack://list-editor/./src/js/startApp.js","webpack://list-editor/./src/index.js"],"sourcesContent":["export default class App {\n  constructor(container) {\n    this.container = container;\n  }\n\n  drawCrm() {\n    return `\n      <div class=\"crm__block\">\n        <h2 class=\"crm__header\">Товары</h2>\n        <button type=\"button\" class=\"crm__add\">\n          <img src=\"./images/add.svg\" alt=\"Add item\" class=\"crm__add-icon\">\n        </button>\n      </div>\n      <div class=\"crm__list list\">\n        <div class=\"list__row\">\n          <h3 class=\"list__col list__title\">Название</h3>\n          <h3 class=\"list__col list__title\">Стоимость</h3>\n          <h3 class=\"list__col list__title\">Действия</h3>\n        </div>         \n      </div>\n    `;\n  }\n\n  bindToDOM() {\n    this.container.innerHTML = this.drawCrm();\n\n    this.buttonToAdd = this.container.querySelector('.crm__add');\n    this.productsList = this.container.querySelector('.list');\n  }\n\n  // Создаем HTML-элемент товара\n  renderItem(item) {\n    return `\n      <div class=\"list__row item\" data-id=\"${item.id}\">\n        <p class=\"list__col item__name\"> ${item.name} </p>\n        <p class=\"list__col item__price\"> ${item.price} </p>\n        <div class=\"list__col item__controls\">\n          <button type=\"button\" class=\"item__control item__control-edit\">\n            <img src=\"./images/edit.svg\" alt=\"Edit item\" class=\"item__edit\">\n          </button>\n          <button type=\"button\" class=\"item__control item__control-delete\">\n            <img src=\"./images/delete.svg\" alt=\"Delete item\" class=\"item__delete\">\n          </button>\n        </div>\n      </div>\n    `;\n  }\n\n  // Удаляем все товары\n  clearProducts() {\n    const items = this.productsList.querySelectorAll('.item');\n    items.forEach((item) => item.remove());\n  }\n\n  // Отрисовываем popover\n  static drawPopover(formName) {\n    const popover = document.createElement('div');\n    popover.classList.add('popover');\n\n    popover.innerHTML = `\n      <div class=\"popover__container\">\n        <form action=\"\" name=\"${formName}\" class=\"popover__form form novalidate\">\n          <div class=\"form__block\">\n            <div class=\"form__row form__name\">\n              <h2 class=\"form__input-title\">Название</h2>\n              <input type=\"text\" name=\"product-name\" class=\"form__input\" required>\n            </div>\n            <div class=\"form__row form__price\">\n              <h2 class=\"form__input-title\">Стоимость</h2>\n              <input type=\"text\" name=\"product-price\" class=\"form__input\" pattern=\"^[1-9][0-9]*$\" required>\n            </div>  \n          </div>\n          <div class=\"form__block form__buttons\">\n            <button class=\"form__btn form__btn-save\">Сохранить</button>\n            <button type=\"button\" class=\"form__btn form__btn-cancel\">Отмена</button>\n          </div>\n        </form>\n      </div>\n    `;\n    return popover;\n  }\n}\n","export default class Product {\n  constructor(name, price, id) {\n    this.name = name;\n    this.price = price;\n    this.id = id;\n  }\n}\n","export default class Tooltip {\n  constructor() {\n    this.tooltips = [];\n    this.errors = {\n      'product-name': {\n        valueMissing: 'Введите имя товара',\n      },\n      'product-price': {\n        valueMissing: 'Введите цену товара',\n        patternMismatch: 'Поле может содержать только цифры',\n      },\n    };\n  }\n\n  // Создаем подсказку\n  renderTooltip(message, input) {\n    const tooltipEl = document.createElement('div');\n    tooltipEl.classList.add('form__tooltip');\n    tooltipEl.textContent = message;\n\n    const id = performance.now();\n\n    this.tooltips.push({\n      id,\n      element: tooltipEl,\n    });\n\n    const { left, bottom } = input.getBoundingClientRect();\n\n    tooltipEl.style.left = `${left}px`;\n    tooltipEl.style.top = `${bottom}px`;\n    document.body.append(tooltipEl);\n\n    return id;\n  }\n\n  // Удаляем подсказку\n  removeTooltip(id) {\n    const tooltip = this.tooltips.find((obj) => obj.id === id);\n    tooltip.element.remove();\n\n    this.tooltips = this.tooltips.filter((obj) => obj.id !== id);\n  }\n}\n","import data from './data.json';\nimport Product from './Product';\nimport Tooltip from './Tooltip';\nimport App from './App';\n\nexport default class Popover {\n  constructor(renewItems) {\n    this.popover = null;\n    this.form = null;\n    this.currentProduct = null;\n    this.renewItems = renewItems;\n    this.tooltip = new Tooltip();\n    this.actualTooltips = [];\n\n    this.showTooltip = this.showTooltip.bind(this);\n    this.saveItem = this.saveItem.bind(this);\n    this.closePopover = this.closePopover.bind(this);\n  }\n\n  // Открываем popover\n  showPopover(formName) {\n    this.popover = App.drawPopover(formName);\n    document.body.append(this.popover);\n\n    this.form = this.popover.querySelector('.form');\n    this.inputName = this.form.querySelector('[name=\"product-name\"]');\n    this.inputPrice = this.form.querySelector('[name=\"product-price\"]');\n    this.btnSave = this.form.querySelector('.form__btn-save');\n    this.btnCancel = this.form.querySelector('.form__btn-cancel');\n\n    this.addEvents();\n  }\n\n  // Добавляем обработчики событий\n  addEvents() {\n    this.form.addEventListener('submit', this.saveItem);\n    this.inputName.addEventListener('input', this.showTooltip);\n    this.inputPrice.addEventListener('input', this.showTooltip);\n    this.btnSave.addEventListener('click', this.saveItem);\n    this.btnCancel.addEventListener('click', this.closePopover);\n  }\n\n  // Показываем подсказку\n  showTooltip(e) {\n    const { target } = e;\n\n    const existingTooltip = this.actualTooltips.find((tip) => tip.name === target.name);\n    const currentError = this.getError(target);\n\n    // Если есть уже такая же ошибка, ничего не меняем\n    if (existingTooltip && existingTooltip.error === currentError) {\n      return;\n    }\n\n    // Если есть подсказка, но ошибка другая, удаляем старую подсказку\n    if (existingTooltip) {\n      this.tooltip.removeTooltip(existingTooltip.id);\n      this.actualTooltips = this.actualTooltips.filter((tip) => tip.name !== target.name);\n    }\n\n    // Если есть новая ошибка, создаем новую подсказку\n    if (currentError) {\n      this.createTooltip(target, currentError);\n    }\n  }\n\n  // Создаем подсказку\n  createTooltip(el, errorText) {\n    this.actualTooltips.push({\n      name: el.name,\n      id: this.tooltip.renderTooltip(errorText, el),\n      error: errorText,\n    });\n  }\n\n  // Находим тип ошибки\n  getError(el) {\n    const errorKey = Object.keys(ValidityState.prototype).find((key) => {\n      if (!el.name) return false;\n      if (key === 'valid') return false;\n\n      return el.validity[key];\n    });\n\n    if (!errorKey) return null;\n\n    return this.tooltip.errors[el.name][errorKey];\n  }\n\n  // Сохраняем данные товара\n  saveItem(e) {\n    e.preventDefault();\n    const { name } = this.form;\n    const nameValue = this.inputName.value;\n    const priceValue = +this.inputPrice.value;\n    if (this.actualTooltips.length > 0) {\n      this.actualTooltips.forEach((tip) => this.tooltip.removeTooltip(tip.id));\n      this.actualTooltips = [];\n    }\n\n    const { elements } = this.form;\n    const hasInvalidInput = [...elements].some((el) => {\n      const error = this.getError(el);\n      if (error) {\n        this.createTooltip(el, error);\n        return true;\n      }\n\n      return false;\n    });\n\n    if (hasInvalidInput) return;\n\n    if (name === 'add-product') {\n      const productName = nameValue;\n      const productPrice = priceValue;\n      const id = Math.ceil(Math.random() * 100000);\n      const product = new Product(productName, productPrice, id);\n      data.push(product);\n    }\n\n    if (name === 'edit-product') {\n      this.currentProduct.name = nameValue;\n      this.currentProduct.price = priceValue;\n    }\n\n    this.renewItems();\n    this.closePopover();\n  }\n\n  // Удаляем popover\n  closePopover() {\n    if (this.actualTooltips.length > 0) {\n      this.actualTooltips.forEach((tip) => this.tooltip.removeTooltip(tip.id));\n      this.actualTooltips = [];\n    }\n\n    this.popover.remove();\n    this.popover = null;\n  }\n}\n","import data from './data.json';\nimport Popover from './Popover';\n\nexport default class Crm {\n  constructor(app) {\n    this.app = app;\n    this.list = this.app.productsList;\n    this.renderProducts = this.renderProducts.bind(this);\n    this.popover = new Popover(this.renderProducts);\n\n    this.addItem = this.addItem.bind(this);\n    this.modifyItem = this.modifyItem.bind(this);\n\n    this.addEvents();\n  }\n\n  // Отображаем товары\n  renderProducts() {\n    this.app.clearProducts();\n\n    data.forEach((item) => {\n      const itemHTML = this.app.renderItem(item);\n      this.list.insertAdjacentHTML('beforeend', itemHTML);\n    });\n  }\n\n  // Добвляем обработчики событий\n  addEvents() {\n    this.app.buttonToAdd.addEventListener('click', this.addItem);\n    this.list.addEventListener('click', this.modifyItem);\n  }\n\n  // Открываем popover при нажатии кнопки \"добавить\" для добавления товара\n  addItem(e) {\n    e.preventDefault();\n    this.popover.showPopover('add-product');\n  }\n\n  // Если кнопка \"удалить\" - удаляем товар,\n  // если \"редактировать\" - открываем popover для изменения товара\n  modifyItem(e) {\n    e.preventDefault();\n    const { target } = e;\n    if (target.closest('.item__control-delete')) {\n      this.deleteItem(target);\n    }\n    if (target.closest('.item__control-edit')) {\n      const product = target.closest('.item');\n      this.editItem(product);\n    }\n  }\n\n  // Редактируем данные товара\n  editItem(itemEl) {\n    this.popover.showPopover('edit-product');\n    const productId = itemEl.getAttribute('data-id');\n    const product = data.find((obj) => obj.id === +productId);\n    this.popover.inputName.value = product.name;\n    this.popover.inputPrice.value = product.price;\n    this.popover.currentProduct = product;\n  }\n\n  // Удаляем товар\n  deleteItem(element) {\n    const product = element.closest('.item');\n    const productId = product.getAttribute('data-id');\n    const index = data.findIndex((obj) => obj.id === +productId);\n    if (index !== -1) {\n      data.splice(index, 1);\n      this.renderProducts();\n    }\n  }\n}\n","import App from './App';\nimport Crm from './Crm';\n\nconst container = document.querySelector('.crm__container');\nconst app = new App(container);\n\napp.bindToDOM();\n\nconst crm = new Crm(app);\ncrm.renderProducts();\n","import './scss/crm.scss';\nimport './js/startApp';\n"],"names":["App","constructor","container","drawCrm","bindToDOM","innerHTML","buttonToAdd","querySelector","productsList","renderItem","item","id","name","price","clearProducts","items","querySelectorAll","forEach","remove","drawPopover","formName","popover","document","createElement","classList","add","Product","Tooltip","tooltips","errors","valueMissing","patternMismatch","renderTooltip","message","input","tooltipEl","textContent","performance","now","push","element","left","bottom","getBoundingClientRect","style","top","body","append","removeTooltip","tooltip","find","obj","filter","data","Popover","renewItems","form","currentProduct","actualTooltips","showTooltip","bind","saveItem","closePopover","showPopover","inputName","inputPrice","btnSave","btnCancel","addEvents","addEventListener","e","target","existingTooltip","tip","currentError","getError","error","createTooltip","el","errorText","errorKey","Object","keys","ValidityState","prototype","key","validity","preventDefault","nameValue","value","priceValue","length","elements","hasInvalidInput","some","productName","productPrice","Math","ceil","random","product","Crm","app","list","renderProducts","addItem","modifyItem","itemHTML","insertAdjacentHTML","closest","deleteItem","editItem","itemEl","productId","getAttribute","index","findIndex","splice","crm"],"sourceRoot":""}